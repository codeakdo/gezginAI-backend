{\rtf1\ansi\ansicpg1252\cocoartf2867
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red183\green111\blue179;\red24\green24\blue24;\red193\green193\blue193;
\red67\green192\blue160;\red89\green138\blue67;\red212\green214\blue154;\red140\green211\blue254;\red202\green202\blue202;
\red194\green126\blue101;\red66\green179\blue255;\red70\green137\blue204;\red205\green173\blue106;\red167\green197\blue152;
}
{\*\expandedcolortbl;;\cssrgb\c77255\c52549\c75294;\cssrgb\c12157\c12157\c12157;\cssrgb\c80000\c80000\c80000;
\cssrgb\c30588\c78824\c69020;\cssrgb\c41569\c60000\c33333;\cssrgb\c86275\c86275\c66667;\cssrgb\c61176\c86275\c99608;\cssrgb\c83137\c83137\c83137;
\cssrgb\c80784\c56863\c47059;\cssrgb\c30980\c75686\c100000;\cssrgb\c33725\c61176\c83922;\cssrgb\c84314\c72941\c49020;\cssrgb\c70980\c80784\c65882;
}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs30 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 from\cf4 \strokec4  \cf5 \strokec5 fastapi\cf4 \strokec4  \cf2 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 FastAPI\cf4 \strokec4 , \cf5 \strokec5 HTTPException\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 from\cf4 \strokec4  \cf5 \strokec5 pydantic\cf4 \strokec4  \cf2 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 BaseModel\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 from\cf4 \strokec4  \cf5 \strokec5 fastapi\cf4 \strokec4 .\cf5 \strokec5 middleware\cf4 \strokec4 .\cf5 \strokec5 cors\cf4 \strokec4  \cf2 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 CORSMiddleware\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 google\cf4 \strokec4 .\cf5 \strokec5 generativeai\cf4 \strokec4  \cf2 \strokec2 as\cf4 \strokec4  \cf5 \strokec5 genai\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 json\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 os\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 random\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 time\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 requests\cf4 \strokec4   \cf6 \strokec6 # <--- YEN\uc0\u304  EKLEND\u304 \cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 from\cf4 \strokec4  \cf5 \strokec5 typing\cf4 \strokec4  \cf2 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 List\cf4 \strokec4 , \cf5 \strokec5 Optional\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 from\cf4 \strokec4  \cf5 \strokec5 dotenv\cf4 \strokec4  \cf2 \strokec2 import\cf4 \strokec4  \cf7 \strokec7 load_dotenv\cf4 \cb1 \strokec4 \
\cf2 \cb3 \strokec2 from\cf4 \strokec4  \cf5 \strokec5 pathlib\cf4 \strokec4  \cf2 \strokec2 import\cf4 \strokec4  \cf5 \strokec5 Path\cf4 \strokec4  \cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 # --- .ENV Y\'dcKLEME ---\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 current_dir\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 Path\cf4 \strokec4 (\cf8 \strokec8 __file__\cf4 \strokec4 ).\cf8 \strokec8 parent\cf4 \cb1 \strokec4 \
\cf8 \cb3 \strokec8 env_path\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf8 \strokec8 current_dir\cf4 \strokec4  \cf7 \strokec7 /\cf4 \strokec4  \cf10 \strokec10 ".env"\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf7 \cb3 \strokec7 load_dotenv\cf4 \strokec4 (\cf8 \strokec8 dotenv_path\cf9 \strokec9 =\cf8 \strokec8 env_path\cf4 \strokec4 )\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 # --- AYARLAR ---\cf4 \cb1 \strokec4 \
\cf6 \cb3 \strokec6 # FORCE_MODE = True ise API Key olsa bile MOCK DATA kullan\uc0\u305 l\u305 r.\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf11 \cb3 \strokec11 FORCE_MODE\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 True\cf4 \strokec4   \cf6 \strokec6 # <--- HAVA DURUMUNU DENEMEK \uc0\u304 \'c7\u304 N BUNU FALSE YAPALIM (API KEY VARSA)\cf4 \cb1 \strokec4 \
\
\cf11 \cb3 \strokec11 GOOGLE_API_KEY\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 os\cf4 \strokec4 .\cf7 \strokec7 getenv\cf4 \strokec4 (\cf10 \strokec10 "GOOGLE_API_KEY"\cf4 \strokec4 )\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf7 \cb3 \strokec7 print\cf4 \strokec4 (\cf10 \strokec10 "\cf13 \strokec13 \\n\cf10 \strokec10 "\cf4 \strokec4  \cf9 \strokec9 +\cf4 \strokec4  \cf10 \strokec10 "="\cf9 \strokec9 *\cf14 \strokec14 40\cf4 \strokec4 )\cb1 \
\cf7 \cb3 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55357 \u56960  GEZG\u304 N AI BACKEND BA\u350 LATILIYOR..."\cf4 \strokec4 )\cb1 \
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 if\cf4 \strokec4  \cf11 \strokec11 GOOGLE_API_KEY\cf4 \strokec4 :\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 masked_key\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 f\cf10 \strokec10 "\cf12 \strokec12 \{\cf11 \strokec11 GOOGLE_API_KEY\cf4 \strokec4 [:\cf14 \strokec14 5\cf4 \strokec4 ]\cf12 \strokec12 \}\cf10 \strokec10 ...\cf12 \strokec12 \{\cf11 \strokec11 GOOGLE_API_KEY\cf4 \strokec4 [\cf9 \strokec9 -\cf14 \strokec14 4\cf4 \strokec4 :]\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \cb1 \strokec4 \
\cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55357 \u56593  API Key Durumu: \u9989  OKUNDU (\cf12 \strokec12 \{\cf8 \strokec8 masked_key\cf12 \strokec12 \}\cf10 \strokec10 )"\cf4 \strokec4 )\cb1 \
\cb3     \cf5 \strokec5 genai\cf4 \strokec4 .\cf7 \strokec7 configure\cf4 \strokec4 (\cf8 \strokec8 api_key\cf9 \strokec9 =\cf11 \strokec11 GOOGLE_API_KEY\cf4 \strokec4 )\cb1 \
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 \strokec2 else\cf4 \strokec4 :\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55357 \u56593  API Key Durumu: \u10060  BULUNAMADI (Sadece Offline Mod \'c7al\u305 \u351 acak)"\cf4 \strokec4 )\cb1 \
\pard\pardeftab720\partightenfactor0
\cf7 \cb3 \strokec7 print\cf4 \strokec4 (\cf10 \strokec10 "="\cf9 \strokec9 *\cf14 \strokec14 40\cf4 \strokec4  \cf7 \strokec7 +\cf4 \strokec4  \cf10 \strokec10 "\cf13 \strokec13 \\n\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf8 \cb3 \strokec8 app\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 FastAPI\cf4 \strokec4 ()\cb1 \
\
\cf8 \cb3 \strokec8 app\cf4 \strokec4 .\cf7 \strokec7 add_middleware\cf4 \strokec4 (\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf5 \strokec5 CORSMiddleware\cf4 \strokec4 ,\cb1 \
\cb3     \cf8 \strokec8 allow_origins\cf9 \strokec9 =\cf4 \strokec4 [\cf10 \strokec10 "*"\cf4 \strokec4 ],\cb1 \
\cb3     \cf8 \strokec8 allow_credentials\cf9 \strokec9 =\cf12 \strokec12 True\cf4 \strokec4 ,\cb1 \
\cb3     \cf8 \strokec8 allow_methods\cf9 \strokec9 =\cf4 \strokec4 [\cf10 \strokec10 "*"\cf4 \strokec4 ],\cb1 \
\cb3     \cf8 \strokec8 allow_headers\cf9 \strokec9 =\cf4 \strokec4 [\cf10 \strokec10 "*"\cf4 \strokec4 ],\cb1 \
\cb3 )\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 # --- DATA MODELS ---\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 TravelRequest\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 city\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 weather\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf10 \strokec10 "Sunny"\cf4 \strokec4     \cb1 \
\cb3     \cf8 \strokec8 budget\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf10 \strokec10 "Medium"\cf4 \strokec4     \cb1 \
\cb3     \cf8 \strokec8 interests\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf10 \strokec10 "General"\cf4 \strokec4  \cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 Coordinates\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 latitude\cf4 \strokec4 : \cf5 \strokec5 float\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 longitude\cf4 \strokec4 : \cf5 \strokec5 float\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 Location\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 address\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 coordinates\cf4 \strokec4 : \cf5 \strokec5 Coordinates\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 Contact\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 phone\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 email\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 website\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 OperatingHours\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 monday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 tuesday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 wednesday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 thursday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 friday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 saturday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 sunday\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 PlaceDetail\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 place_name\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 category\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 features\cf4 \strokec4 : \cf5 \strokec5 List\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ]\cb1 \
\cb3     \cf8 \strokec8 rating\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 float\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 location\cf4 \strokec4 : \cf5 \strokec5 Location\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 contact\cf4 \strokec4 : \cf5 \strokec5 Contact\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 hours\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 OperatingHours\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 map_link\cf4 \strokec4 : \cf5 \strokec5 Optional\cf4 \strokec4 [\cf5 \strokec5 str\cf4 \strokec4 ] \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 class\cf4 \strokec4  \cf5 \strokec5 TripResponse\cf4 \strokec4 (\cf5 \strokec5 BaseModel\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 trip_title\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 clothing_advice\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 places\cf4 \strokec4 : \cf5 \strokec5 List\cf4 \strokec4 [\cf5 \strokec5 PlaceDetail\cf4 \strokec4 ]\cb1 \
\
\
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 # --- YEN\uc0\u304  EKLENEN FONKS\u304 YON: GER\'c7EK HAVA DURUMU ---\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 def\cf4 \strokec4  \cf7 \strokec7 get_real_weather\cf4 \strokec4 (\cf8 \strokec8 city_name\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf10 \strokec10 """\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10     wttr.in servisini kullanarak anl\uc0\u305 k hava durumunu \'e7eker.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     API Key gerektirmez.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     """\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf2 \strokec2 try\cf4 \strokec4 :\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55356 \u57101  Hava durumu soruluyor: \cf12 \strokec12 \{\cf8 \strokec8 city_name\cf12 \strokec12 \}\cf10 \strokec10 ..."\cf4 \strokec4 )\cb1 \
\cb3         \cf6 \strokec6 # format=%C -> Sadece hava durumunu (Clear, Rain, Cloudy vb.) verir\cf4 \cb1 \strokec4 \
\cb3         \cf8 \strokec8 url\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 f\cf10 \strokec10 "https://wttr.in/\cf12 \strokec12 \{\cf8 \strokec8 city_name\cf12 \strokec12 \}\cf10 \strokec10 ?format=%C"\cf4 \cb1 \strokec4 \
\cb3         \cf8 \strokec8 response\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 requests\cf4 \strokec4 .\cf7 \strokec7 get\cf4 \strokec4 (\cf8 \strokec8 url\cf4 \strokec4 , \cf8 \strokec8 timeout\cf9 \strokec9 =\cf14 \strokec14 3\cf4 \strokec4 ) \cf6 \strokec6 # 2 saniye i\'e7inde cevap gelmezse ge\'e7\cf4 \cb1 \strokec4 \
\cb3         \cb1 \
\cb3         \cf2 \strokec2 if\cf4 \strokec4  \cf8 \strokec8 response\cf4 \strokec4 .\cf8 \strokec8 status_code\cf4 \strokec4  \cf9 \strokec9 ==\cf4 \strokec4  \cf14 \strokec14 200\cf4 \strokec4 :\cb1 \
\cb3             \cf8 \strokec8 weather_condition\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf8 \strokec8 response\cf4 \strokec4 .\cf8 \strokec8 text\cf4 \strokec4 .\cf7 \strokec7 strip\cf4 \strokec4 ()\cb1 \
\cb3             \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55356 \u57126 \u65039   Hava Durumu Al\u305 nd\u305 : \cf12 \strokec12 \{\cf8 \strokec8 weather_condition\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\cb3             \cf2 \strokec2 return\cf4 \strokec4  \cf8 \strokec8 weather_condition\cf4 \cb1 \strokec4 \
\cb3         \cf2 \strokec2 else\cf4 \strokec4 :\cb1 \
\cb3             \cf2 \strokec2 return\cf4 \strokec4  \cf10 \strokec10 "Sunny"\cf4 \strokec4  \cf6 \strokec6 # Hata olursa varsay\uc0\u305 lan\cf4 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 except\cf4 \strokec4  \cf5 \strokec5 Exception\cf4 \strokec4  \cf2 \strokec2 as\cf4 \strokec4  \cf8 \strokec8 e\cf4 \strokec4 :\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u9888 \u65039  Hava durumu al\u305 namad\u305  (\cf12 \strokec12 \{\cf8 \strokec8 e\cf12 \strokec12 \}\cf10 \strokec10 ), varsay\uc0\u305 lan 'Sunny' kullan\u305 l\u305 yor."\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 return\cf4 \strokec4  \cf10 \strokec10 "Sunny"\cf4 \cb1 \strokec4 \
\
\
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 def\cf4 \strokec4  \cf7 \strokec7 get_mock_data_from_file\cf4 \strokec4 (\cf8 \strokec8 city_name\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 normalized_city\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf8 \strokec8 city_name\cf4 \strokec4 .\cf7 \strokec7 lower\cf4 \strokec4 ()\\\cb1 \
\cb3         .\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u304 "\cf4 \strokec4 , \cf10 \strokec10 "i"\cf4 \strokec4 ).\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u305 "\cf4 \strokec4 , \cf10 \strokec10 "i"\cf4 \strokec4 )\\\cb1 \
\cb3         .\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\'e7"\cf4 \strokec4 , \cf10 \strokec10 "c"\cf4 \strokec4 ).\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u351 "\cf4 \strokec4 , \cf10 \strokec10 "s"\cf4 \strokec4 )\\\cb1 \
\cb3         .\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u287 "\cf4 \strokec4 , \cf10 \strokec10 "g"\cf4 \strokec4 ).\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\'fc"\cf4 \strokec4 , \cf10 \strokec10 "u"\cf4 \strokec4 )\\\cb1 \
\cb3         .\cf7 \strokec7 replace\cf4 \strokec4 (\cf10 \strokec10 "\'f6"\cf4 \strokec4 , \cf10 \strokec10 "o"\cf4 \strokec4 )\cb1 \
\cb3     \cb1 \
\cb3     \cf2 \strokec2 if\cf4 \strokec4  \cf10 \strokec10 "antep"\cf4 \strokec4  \cf12 \strokec12 in\cf4 \strokec4  \cf8 \strokec8 normalized_city\cf4 \strokec4 :\cb1 \
\cb3         \cf8 \strokec8 normalized_city\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf10 \strokec10 "antep"\cf4 \cb1 \strokec4 \
\
\cb3     \cf8 \strokec8 folder_path\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf8 \strokec8 current_dir\cf4 \strokec4  \cf7 \strokec7 /\cf4 \strokec4  \cf10 \strokec10 "data"\cf4 \strokec4  \cf7 \strokec7 /\cf4 \strokec4  \cf8 \strokec8 normalized_city\cf4 \cb1 \strokec4 \
\cb3     \cb1 \
\cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55357 \u56514  Klas\'f6rde Aran\u305 yor: \cf12 \strokec12 \{\cf8 \strokec8 folder_path\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\
\cb3     \cf2 \strokec2 if\cf4 \strokec4  \cf12 \strokec12 not\cf4 \strokec4  \cf8 \strokec8 folder_path\cf4 \strokec4 .\cf7 \strokec7 exists\cf4 \strokec4 ():\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u10060  '\cf12 \strokec12 \{\cf8 \strokec8 normalized_city\cf12 \strokec12 \}\cf10 \strokec10 ' klas\'f6r\'fc bulunamad\uc0\u305 ."\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 return\cf4 \strokec4  \cf12 \strokec12 None\cf4 \strokec4  \cb1 \
\
\cb3     \cf8 \strokec8 files\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 list\cf4 \strokec4 (\cf8 \strokec8 folder_path\cf4 \strokec4 .\cf7 \strokec7 glob\cf4 \strokec4 (\cf10 \strokec10 "*.json"\cf4 \strokec4 ))\cb1 \
\cb3     \cb1 \
\cb3     \cf2 \strokec2 if\cf4 \strokec4  \cf12 \strokec12 not\cf4 \strokec4  \cf8 \strokec8 files\cf4 \strokec4 :\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u10060  Klas\'f6r var ama i\'e7i bo\u351 !"\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 return\cf4 \strokec4  \cf12 \strokec12 None\cf4 \cb1 \strokec4 \
\
\cb3     \cf8 \strokec8 selected_file\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 random\cf4 \strokec4 .\cf8 \strokec8 choice\cf4 \strokec4 (\cf8 \strokec8 files\cf4 \strokec4 )\cb1 \
\cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55356 \u57266  Rastgele Se\'e7ilen Dosya: \cf12 \strokec12 \{\cf8 \strokec8 selected_file\cf4 \strokec4 .\cf8 \strokec8 name\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\cb3     \cb1 \
\cb3     \cf2 \strokec2 with\cf4 \strokec4  \cf7 \strokec7 open\cf4 \strokec4 (\cf8 \strokec8 selected_file\cf4 \strokec4 , \cf10 \strokec10 "r"\cf4 \strokec4 , \cf8 \strokec8 encoding\cf9 \strokec9 =\cf10 \strokec10 "utf-8"\cf4 \strokec4 ) \cf2 \strokec2 as\cf4 \strokec4  \cf8 \strokec8 f\cf4 \strokec4 :\cb1 \
\cb3         \cf2 \strokec2 return\cf4 \strokec4  \cf5 \strokec5 json\cf4 \strokec4 .\cf7 \strokec7 load\cf4 \strokec4 (\cf8 \strokec8 f\cf4 \strokec4 )\cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 # --- AI FUNCTION ---\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 def\cf4 \strokec4  \cf7 \strokec7 generate_trip_plan_ai\cf4 \strokec4 (\cf8 \strokec8 request\cf4 \strokec4 : \cf5 \strokec5 TravelRequest\cf4 \strokec4 , \cf8 \strokec8 real_weather\cf4 \strokec4 : \cf5 \strokec5 str\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf8 \strokec8 model_name\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf10 \strokec10 'gemini-2.5-flash'\cf4 \strokec4  \cb1 \
\cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55358 \u56598  Yapay Zeka Modeli: \cf12 \strokec12 \{\cf8 \strokec8 model_name\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\cb3     \cf8 \strokec8 model\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf5 \strokec5 genai\cf4 \strokec4 .\cf5 \strokec5 GenerativeModel\cf4 \strokec4 (\cf8 \strokec8 model_name\cf4 \strokec4 )\cb1 \
\cb3     \cb1 \
\cb3     \cf6 \strokec6 # PROMPT G\'dcNCELLEND\uc0\u304 : Frontend'den gelen de\u287 il, bizim \'e7ekti\u287 imiz real_weather kullan\u305 l\u305 yor\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 prompt\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf12 \strokec12 f\cf10 \strokec10 """\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf10 \cb3 \strokec10     You are a smart travel assistant. Create a 1-day itinerary for \cf12 \strokec12 \{\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 city\cf12 \strokec12 \}\cf10 \strokec10 .\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     \cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     CRITICAL CONTEXT:\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     - Current Real-time Weather: \cf12 \strokec12 \{\cf8 \strokec8 real_weather\cf12 \strokec12 \}\cf10 \strokec10  (MUST affect the plan significantly!)\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     - Budget: \cf12 \strokec12 \{\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 budget\cf12 \strokec12 \}\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     - Interests: \cf12 \strokec12 \{\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 interests\cf12 \strokec12 \}\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     \cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     RULES:\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     1. Return ONLY JSON matching the schema below.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     2. Provide a diverse itinerary with at least 4 items.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     3. MANDATORY: The list MUST include at least one 'Food & Drink' spot.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     4. MANDATORY: The list MUST include at least one 'Sightseeing' spot.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     5. WEATHER ADAPTATION: \cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10        - If weather is 'Rain' or 'Snow', suggest INDOOR activities (Museums, Cafes, Malls).\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10        - If weather is 'Sunny' or 'Clear', suggest OUTDOOR activities (Parks, Walking tours).\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10        - Specifically mention the weather in 'clothing_advice'.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     6. Provide real coordinates.\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     \cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     EXPECTED JSON SCHEMA:\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     \cf13 \strokec13 \{\{\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10         "trip_title": "Title here (Mention weather like 'Rainy Day in London')",\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10         "clothing_advice": "Specific advice based on \cf12 \strokec12 \{\cf8 \strokec8 real_weather\cf12 \strokec12 \}\cf10 \strokec10 ",\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10         "places": [\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10             \cf13 \strokec13 \{\{\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "place_name": "Name",\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "category": "Type",\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "features": ["Feature1", "Feature2"],\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "rating": 4.5,\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "location": \cf13 \strokec13 \{\{\cf10 \strokec10  "address": "...", "coordinates": \cf13 \strokec13 \{\{\cf10 \strokec10  "latitude": 0.0, "longitude": 0.0 \cf13 \strokec13 \}\}\cf10 \strokec10  \cf13 \strokec13 \}\}\cf10 \strokec10 ,\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "contact": \cf13 \strokec13 \{\{\cf10 \strokec10  "phone": "...", "email": null, "website": "..." \cf13 \strokec13 \}\}\cf10 \strokec10 ,\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "hours": \cf13 \strokec13 \{\{\cf10 \strokec10  "monday": "..." \cf13 \strokec13 \}\}\cf10 \strokec10 ,\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10                 "map_link": "..."\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10             \cf13 \strokec13 \}\}\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10         ]\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     \cf13 \strokec13 \}\}\cf4 \cb1 \strokec4 \
\cf10 \cb3 \strokec10     """\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf2 \strokec2 try\cf4 \strokec4 :\cb1 \
\cb3         \cf8 \strokec8 response\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf8 \strokec8 model\cf4 \strokec4 .\cf7 \strokec7 generate_content\cf4 \strokec4 (\cf8 \strokec8 prompt\cf4 \strokec4 , \cf8 \strokec8 generation_config\cf9 \strokec9 =\cf4 \strokec4 \{\cf10 \strokec10 "response_mime_type"\cf4 \strokec4 : \cf10 \strokec10 "application/json"\cf4 \strokec4 \})\cb1 \
\cb3         \cf2 \strokec2 return\cf4 \strokec4  \cf5 \strokec5 json\cf4 \strokec4 .\cf7 \strokec7 loads\cf4 \strokec4 (\cf8 \strokec8 response\cf4 \strokec4 .\cf8 \strokec8 text\cf4 \strokec4 )\cb1 \
\cb3     \cf2 \strokec2 except\cf4 \strokec4  \cf5 \strokec5 Exception\cf4 \strokec4  \cf2 \strokec2 as\cf4 \strokec4  \cf8 \strokec8 e\cf4 \strokec4 :\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "AI Error: \cf12 \strokec12 \{\cf8 \strokec8 e\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 raise\cf4 \strokec4  \cf8 \strokec8 e\cf4 \strokec4  \cb1 \
\
\pard\pardeftab720\partightenfactor0
\cf6 \cb3 \strokec6 # --- ENDPOINT ---\cf4 \cb1 \strokec4 \
\pard\pardeftab720\partightenfactor0
\cf7 \cb3 \strokec7 @\cf8 \strokec8 app\cf7 \strokec7 .post\cf4 \strokec4 (\cf10 \strokec10 "/create-plan"\cf4 \strokec4 , \cf8 \strokec8 response_model\cf9 \strokec9 =\cf5 \strokec5 TripResponse\cf4 \strokec4 )\cb1 \
\pard\pardeftab720\partightenfactor0
\cf12 \cb3 \strokec12 async\cf4 \strokec4  \cf12 \strokec12 def\cf4 \strokec4  \cf7 \strokec7 create_plan\cf4 \strokec4 (\cf8 \strokec8 request\cf4 \strokec4 : \cf5 \strokec5 TravelRequest\cf4 \strokec4 ):\cb1 \
\pard\pardeftab720\partightenfactor0
\cf4 \cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\cf13 \strokec13 \\n\cf10 \strokec10 \uc0\u55357 \u56552  YEN\u304  \u304 STEK: \cf12 \strokec12 \{\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 city\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\
\cb3     \cf6 \strokec6 # 1. ADIM: Anl\uc0\u305 k Hava Durumunu \'c7ek\cf4 \cb1 \strokec4 \
\cb3     \cf8 \strokec8 current_weather\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf7 \strokec7 get_real_weather\cf4 \strokec4 (\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 city\cf4 \strokec4 )\cb1 \
\cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55356 \u57121 \u65039  Tespit Edilen Hava: \cf12 \strokec12 \{\cf8 \strokec8 current_weather\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\
\cb3     \cf6 \strokec6 # Yapay zeka d\'fc\uc0\u351 \'fcn\'fcyor efekti\cf4 \cb1 \strokec4 \
\cb3     \cf7 \strokec7 print\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u9203  \u304 \u351 leniyor..."\cf4 \strokec4 )\cb1 \
\cb3     \cb1 \
\cb3     \cf6 \strokec6 # FORCE_MODE veya API Key yoksa Mock Data\cf4 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 if\cf4 \strokec4  \cf11 \strokec11 FORCE_MODE\cf4 \strokec4  \cf12 \strokec12 or\cf4 \strokec4  \cf12 \strokec12 not\cf4 \strokec4  \cf11 \strokec11 GOOGLE_API_KEY\cf4 \strokec4 :\cb1 \
\cb3         \cf5 \strokec5 time\cf4 \strokec4 .\cf7 \strokec7 sleep\cf4 \strokec4 (\cf14 \strokec14 1.5\cf4 \strokec4 )\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u55357 \u57314  Demo Modu: Mock veri se\'e7iliyor..."\cf4 \strokec4 )\cb1 \
\cb3         \cf8 \strokec8 mock_data\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf7 \strokec7 get_mock_data_from_file\cf4 \strokec4 (\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 city\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 if\cf4 \strokec4  \cf8 \strokec8 mock_data\cf4 \strokec4 :\cb1 \
\cb3             \cf6 \strokec6 # Demo modunda bile hava durumu tavsiyesini g\'fcncelleyebiliriz (opsiyonel)\cf4 \cb1 \strokec4 \
\cb3             \cf6 \strokec6 # Ama \uc0\u351 imdilik dosyadaki sabit veriyi d\'f6nelim\cf4 \cb1 \strokec4 \
\cb3             \cf2 \strokec2 return\cf4 \strokec4  \cf8 \strokec8 mock_data\cf4 \cb1 \strokec4 \
\cb3         \cf2 \strokec2 else\cf4 \strokec4 :\cb1 \
\cb3             \cf8 \strokec8 fallback_data\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf7 \strokec7 get_mock_data_from_file\cf4 \strokec4 (\cf10 \strokec10 "adana"\cf4 \strokec4 )\cb1 \
\cb3             \cf2 \strokec2 if\cf4 \strokec4  \cf8 \strokec8 fallback_data\cf4 \strokec4 :\cb1 \
\cb3                 \cf2 \strokec2 return\cf4 \strokec4  \cf8 \strokec8 fallback_data\cf4 \cb1 \strokec4 \
\cb3             \cf2 \strokec2 raise\cf4 \strokec4  \cf5 \strokec5 HTTPException\cf4 \strokec4 (\cf8 \strokec8 status_code\cf9 \strokec9 =\cf14 \strokec14 404\cf4 \strokec4 , \cf8 \strokec8 detail\cf9 \strokec9 =\cf10 \strokec10 "Demo verisi bulunamad\uc0\u305 ."\cf4 \strokec4 )\cb1 \
\
\cb3     \cf6 \strokec6 # Normal \uc0\u350 artlar: Canl\u305  Gemini + Ger\'e7ek Hava Durumu\cf4 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 try\cf4 \strokec4 :\cb1 \
\cb3         \cf6 \strokec6 # Frontend'den gelen 'sunny' yerine, bizim \'e7ekti\uc0\u287 imiz 'current_weather'\u305  g\'f6nderiyoruz\cf4 \cb1 \strokec4 \
\cb3         \cf8 \strokec8 data\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf7 \strokec7 generate_trip_plan_ai\cf4 \strokec4 (\cf8 \strokec8 request\cf4 \strokec4 , \cf8 \strokec8 current_weather\cf4 \strokec4 )\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf10 \strokec10 "\uc0\u9989  AI yan\u305 t\u305  ba\u351 ar\u305 yla al\u305 nd\u305 ."\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 return\cf4 \strokec4  \cf8 \strokec8 data\cf4 \cb1 \strokec4 \
\cb3     \cf2 \strokec2 except\cf4 \strokec4  \cf5 \strokec5 Exception\cf4 \strokec4  \cf2 \strokec2 as\cf4 \strokec4  \cf8 \strokec8 e\cf4 \strokec4 :\cb1 \
\cb3         \cf7 \strokec7 print\cf4 \strokec4 (\cf12 \strokec12 f\cf10 \strokec10 "\uc0\u55357 \u57000  API Hatas\u305 : \cf12 \strokec12 \{\cf8 \strokec8 e\cf12 \strokec12 \}\cf10 \strokec10 "\cf4 \strokec4 )\cb1 \
\cb3         \cf8 \strokec8 mock_data\cf4 \strokec4  \cf9 \strokec9 =\cf4 \strokec4  \cf7 \strokec7 get_mock_data_from_file\cf4 \strokec4 (\cf8 \strokec8 request\cf4 \strokec4 .\cf8 \strokec8 city\cf4 \strokec4 )\cb1 \
\cb3         \cf2 \strokec2 if\cf4 \strokec4  \cf8 \strokec8 mock_data\cf4 \strokec4 :\cb1 \
\cb3             \cf2 \strokec2 return\cf4 \strokec4  \cf8 \strokec8 mock_data\cf4 \cb1 \strokec4 \
\cb3         \cf2 \strokec2 else\cf4 \strokec4 :\cb1 \
\cb3             \cf2 \strokec2 raise\cf4 \strokec4  \cf5 \strokec5 HTTPException\cf4 \strokec4 (\cf8 \strokec8 status_code\cf9 \strokec9 =\cf14 \strokec14 503\cf4 \strokec4 , \cf8 \strokec8 detail\cf9 \strokec9 =\cf10 \strokec10 "Servis hizmet veremiyor."\cf4 \strokec4 )\cb1 \
}